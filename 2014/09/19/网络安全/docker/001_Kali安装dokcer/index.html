<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>Kali 安装 docker | LIURONG</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="做时间的朋友！">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Kali 安装 docker | LIURONG">
    <meta name="twitter:description" content="做时间的朋友！">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Kali 安装 docker | LIURONG">
    <meta property="og:description" content="做时间的朋友！">

    
    <meta name="author" content="lroyle">
    
    
<link rel="stylesheet" href="/css/vno.css">

    
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">


    
    <link rel="icon" href="/images/avatar-small.png">
    

    <meta name="generator" content="hexo"/>
    
    <link rel="alternate" type="application/rss+xml" title="LIURONG" href="/atom.xml">
    

    <link rel="canonical" href="http://liurong.love/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/"/>

                 
</head>

<body class="home-template no-js">
    
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>

    
<script src="/js/main.js"></script>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-cover.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 LIURONG 的主页"><img src="/images/avatar.jpg" width="80" alt="LIURONG logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for LIURONG">LIURONG</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">面向大海 | 重新启航</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">做时间的朋友！</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">文字阁</a></li>
            
              <li class="navigation__item"><a href="/archives">Archives</a></li>
            
              <li class="navigation__item"><a href="/favourite">黄金屋</a></li>
            
              <li class="navigation__item"><a href="/favourite/time.html">时光机</a></li>
            
              <li class="navigation__item"><a href="/favourite/image.html">幻想间</a></li>
            
              <li class="navigation__item"><a href="/about">关于我</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  
  <li class="navigation__item">
    <a href="https://weibo.com/lroyle" title="我的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li> 


  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/oneeno" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  

  <li class="navigation__item">
    <a href="/atom.xml" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-purple"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2014-09-19T08:15:55.000Z" class="post-list__meta--date date">2014-09-19</time> &#8226; <span class="post-meta__tags tags">于 
  <a class="-none-link" href="/tags/docker/" rel="tag">docker</a>
 </span>
      <span class="page-pv">
       阅读 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">Kali 安装 docker</h1>
  </header>

  <section class="post">
    <h3 id="更新系统和软件"><a href="#更新系统和软件" class="headerlink" title="更新系统和软件"></a>更新系统和软件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt-get update  <span class="comment">#从软件源获取最新软件包索引文件</span></span><br><span class="line">apt-get upgrade  <span class="comment">#用于软件包升级的命令</span></span><br><span class="line"></span><br><span class="line">如果流量不是很稳定</span><br><span class="line">就可能需要</span><br><span class="line">apt-get update --fix-missing  <span class="comment">#用于修复软件包安装或升级过程中可能出现的软件包缺失问题的命令</span></span><br></pre></td></tr></table></figure>

<h3 id="第一步：添加Docker官方的GPG密钥"><a href="#第一步：添加Docker官方的GPG密钥" class="headerlink" title="第一步：添加Docker官方的GPG密钥"></a><strong>第一步：添加Docker官方的GPG密钥</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加 Docker 官方的GPG 密钥</span></span><br><span class="line">curl  -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302180959037.png" alt="image-20250302180959037"></p>
<h3 id="第二步：-更新源"><a href="#第二步：-更新源" class="headerlink" title="第二步： 更新源"></a><strong>第二步： 更新源</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;deb https://download.docker.com/linux/debian stretch stable&#x27;</span>&gt; /etc/apt/sources.list.d/docker.list</span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302181114522.png" alt="image-20250302181114522"></p>
<h3 id="第三步：-直接导入证书"><a href="#第三步：-直接导入证书" class="headerlink" title="第三步： 直接导入证书"></a><strong>第三步： 直接导入证书</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要先进入管理噪员权限</span></span><br><span class="line">sudo su </span><br><span class="line"><span class="comment"># 再输入以下导入证书命令</span></span><br><span class="line">apt-get install apt-transport-https  ca-certificates  curl  gnupg2  software-properties-common</span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302181234598.png" alt="image-20250302181234598"></p>
<h3 id="第四步：系统更新"><a href="#第四步：系统更新" class="headerlink" title="第四步：系统更新"></a>第四步：系统更新</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update </span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302181420582.png" alt="image-20250302181420582"></p>
<h3 id="第五步：安装Docker"><a href="#第五步：安装Docker" class="headerlink" title="第五步：安装Docker"></a>第五步：安装Docker</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker.io</span><br><span class="line">apt-get install docker-compose</span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302181542330.png" alt="image-20250302181542330"></p>
<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302181624314.png" alt="image-20250302181624314"></p>
<h3 id="第六步：检查docker安装是否成功"><a href="#第六步：检查docker安装是否成功" class="headerlink" title="第六步：检查docker安装是否成功"></a><strong>第六步：检查docker安装是否成功</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker -v <span class="comment">#检查版本</span></span><br><span class="line">systemctl status docker <span class="comment">#查看docker的systemd配置位置</span></span><br><span class="line">systemctl start docker <span class="comment">#启动docker服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> docker <span class="comment">#设置开机自启</span></span><br><span class="line">输入docker-compose 为蓝色说明安装成功</span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302181841521.png" alt="image-20250302181841521"></p>
<h3 id="Docker-常用命令："><a href="#Docker-常用命令：" class="headerlink" title="Docker 常用命令："></a>Docker 常用命令：</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">service docker start   //启动docker服务</span><br><span class="line"> </span><br><span class="line">docker version   //查看docker版本信息</span><br><span class="line"> </span><br><span class="line">docker ps  查看容器</span><br><span class="line"> </span><br><span class="line">docker  images   查看已有的镜像</span><br><span class="line"> </span><br><span class="line">备注：由于国内网络问题，建议使用加速器加快镜像的下载</span><br><span class="line"> </span><br><span class="line">添加加速器方法：</span><br><span class="line"> </span><br><span class="line">编辑这个文件，如果没有对话就创建这个文件</span><br><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"> </span><br><span class="line">内容如下：</span><br><span class="line"> </span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;registry-mirrors&quot;</span>: [</span><br><span class="line"><span class="string">&quot;http://hub-mirror.c.163.com&quot;</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">这里我使用对是国内 163 网易源，其他源可以自行百度替换。</span><br><span class="line"> </span><br><span class="line">配置完成后重启服务才可以生效：命令如下</span><br><span class="line"> </span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<h3 id="第七步：安装完-Docker-后，需要安装-compose"><a href="#第七步：安装完-Docker-后，需要安装-compose" class="headerlink" title="第七步：安装完 Docker 后，需要安装 compose"></a>第七步：安装完 Docker 后，需要安装 compose</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install docker-compose</span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302182209878.png" alt="image-20250302182209878"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入 docker-compose,显示下面页面，说明安装成功。</span></span><br><span class="line"> docker-compose</span><br></pre></td></tr></table></figure>

<p><img src="/2014/09/19/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/docker/001_Kali%E5%AE%89%E8%A3%85dokcer/image-20250302182404232.png" alt="image-20250302182404232"></p>
<h4 id="查看-docker-compose-版本"><a href="#查看-docker-compose-版本" class="headerlink" title="查看 docker-compose 版本"></a>查看 docker-compose 版本</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version</span><br><span class="line"></span><br><span class="line">docker-compose version 1.29.2, build unknown</span><br><span class="line">docker-py version: &lt;module <span class="string">&#x27;docker.version&#x27;</span> from <span class="string">&#x27;/usr/lib/python3/dist-packages/docker/version.py&#x27;</span>&gt;</span><br><span class="line">CPython version: 3.11.8</span><br><span class="line">OpenSSL version: OpenSSL 3.4.1 11 Feb 2025</span><br></pre></td></tr></table></figure>

<h4 id="更新docker-镜像"><a href="#更新docker-镜像" class="headerlink" title="更新docker 镜像"></a>更新docker 镜像</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;https://docker.m.daocloud.io&quot;</span>,</span><br><span class="line">     <span class="string">&quot;http://hub-mirror.c.163.com&quot;</span>,</span><br><span class="line">     <span class="string">&quot;https://mirrors.tuna.tsinghua.edu.cn&quot;</span>,</span><br><span class="line">     <span class="string">&quot;http://mirrors.sohu.com&quot;</span>,</span><br><span class="line">     <span class="string">&quot;https://ustc-edu-cn.mirror.aliyuncs.com&quot;</span>,</span><br><span class="line">     <span class="string">&quot;https://ccr.ccs.tencentyun.com&quot;</span>,</span><br><span class="line">     <span class="string">&quot;https://docker.awsl9527.cn&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新加载配置</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h3 id="docker-镜像常用命令"><a href="#docker-镜像常用命令" class="headerlink" title="docker 镜像常用命令"></a>docker 镜像常用命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">docker search</span><br><span class="line"><span class="comment"># 搜索镜像（只搜索官方仓库的，官方仓库地址：hub.docker.com)</span></span><br><span class="line"><span class="comment"># docker search tomcat</span></span><br><span class="line"><span class="comment"># docker search apache</span></span><br><span class="line"></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># 查看本地镜像列表，images 就是图像、镜像的意思</span></span><br><span class="line"><span class="comment"># 本地有的镜像，就不要再去下载了，而且可以将本地镜像导出来分享给别人</span></span><br><span class="line"></span><br><span class="line">docker pull</span><br><span class="line"><span class="comment"># 下载镜像，摘取镜像</span></span><br><span class="line"><span class="comment"># docker pull tomcat:latest</span></span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line"></span><br><span class="line">docker push</span><br><span class="line"><span class="comment"># 上传镜像，推送镜像，推到官方仓库，推送需要在本地登录官方账号才能推送。</span></span><br><span class="line"></span><br><span class="line">docker rmi</span><br><span class="line"><span class="comment"># 删除镜像，rm image 的意思，直接 rm 不加 i 表示要删除容器，可以通过名称加版本来删除，或者直接通过镜像 id 值来删除</span></span><br><span class="line"><span class="comment"># docker rmi tomcat:latest  或者 docker rmi imageid 值</span></span><br><span class="line"><span class="comment"># 可以同时删除多个镜像：docker rmi tomcat:latest tomcat:jre17-temurin-jammy</span></span><br><span class="line"><span class="comment"># 如果这个镜像处于运行状态，那么就删除不了。</span></span><br><span class="line"><span class="comment"># 查看镜像的运行状态 docker container ls，</span></span><br><span class="line"></span><br><span class="line">docker save</span><br><span class="line"><span class="comment"># 导出镜像（压缩包）docker save 镜像名称：版本 -o docker_nginx1.20.tart.gz</span></span><br><span class="line"><span class="comment"># docker save nginx:1.16 -o docker.nginx1.16.tar.gz</span></span><br><span class="line"><span class="comment"># ls 就看到了 docker.nginx.1.16.tar.gz</span></span><br><span class="line"></span><br><span class="line">docker load</span><br><span class="line"><span class="comment"># 导入镜像 docker load -i docker_nginx1.20.tar.gz，会自动解压并导入到 docker 服务中</span></span><br></pre></td></tr></table></figure>

<h3 id="docker-容器常用命令"><a href="#docker-容器常用命令" class="headerlink" title="docker 容器常用命令"></a>docker 容器常用命令</h3><p>docker 常见命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker ps -aq <span class="comment"># 列出所有的容器 ID</span></span><br><span class="line">docker stop $(docker ps -aq) <span class="comment"># 停止所有的容器</span></span><br><span class="line">docker <span class="built_in">rm</span> $(docker ps -aq) <span class="comment"># 删除所有的容器</span></span><br><span class="line">docker rmi $(docker images -q) <span class="comment"># 删除所有的镜像</span></span><br><span class="line">docker <span class="built_in">cp</span> mycontainer:/opt/file.txt /opt/local/ <span class="comment"># 复制文件 容器到主机</span></span><br><span class="line">docker <span class="built_in">cp</span> /opt/local/file.txt mycontainer:/opt/ <span class="comment"># 复制文件 主机到容器</span></span><br><span class="line">docker image prune --force --all或者docker image prune -f -a <span class="comment"># 删除所有不使用的镜像</span></span><br><span class="line">docker container prune <span class="comment"># 删除所有停止的容器</span></span><br></pre></td></tr></table></figure>

<p>方式二；待整理</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">docker run 运行一个新容器</span><br><span class="line">socker ps  === docker container <span class="built_in">ls</span>  <span class="comment"># 参数：默认显示 up 状态的容器， -a 查看所有容器，或者 --all</span></span><br><span class="line">docker stop 		停止容器	<span class="comment"># docker stop 容器 id 或者 容器名字</span></span><br><span class="line">docker <span class="built_in">kill</span>			杀掉容器	<span class="comment"># 强制关闭容器，尽量不要用，很容易就启动不了了</span></span><br><span class="line">docker start 		启动容器	<span class="comment"># docker start 容器id 或者 容器名字</span></span><br><span class="line">docker restart 		 重启容器	<span class="comment"># docker restart 容器 id 或者 容器名字</span></span><br><span class="line">docker <span class="built_in">rm</span> 			删除容器	<span class="comment"># docker rm 容器 id 或者 容器名字，同时删除多个，就空格隔开，处于 up 状态是不能直接删除的，强制删除是可以删除 up 状态的容器，docker rm f 容器名称或者 id</span></span><br><span class="line">docker <span class="built_in">rm</span> -f <span class="string">&#x27;docker ps -a -q&#x27;</span>  <span class="comment"># 删除所有容器，-q 是只显示容器id,反引号中的指令优先执行</span></span><br><span class="line">docker top	查看容器内的进程      <span class="comment"># docker top 容器 ip 或者 容器名字</span></span><br><span class="line">docker stats 查看容器的资源占用情况 </span><br><span class="line">docker <span class="built_in">exec</span>			进入容器	<span class="comment"># docker exec -it 容器 id 或者 容器名字</span></span><br><span class="line">	<span class="comment"># 直接交互指令：docker exec -it 7673232 ls   $ 执行 ls 指令</span></span><br><span class="line">	<span class="comment"># 进入终端：docker exec -it 7673232 /bin/bash 或者 /bin/sh  # /bin/bash 打开一个终端窗口，exit 指令退出终端，但是 docker 容器内容一般不会安装额外的软件，所以导致大量的指令是用不了的，比如：ipconfig, ps, ip addr 等。</span></span><br><span class="line"></span><br><span class="line">docker inspect -f <span class="string">&#x27;&#123;&#123;.Name&#125;&#125; =&gt; &#123;&#123;.NetworkSettings.IPAddress &#125;&#125;&#x27;</span> $(docker ps -aq)</span><br><span class="line"><span class="comment"># 可以查看所有容器的 IP 地址，容器的IP地址是从&#x27;127.17.0.1‘开始的，docker 容器类似于一个微型的虚拟机，它占用的都是宿主机（物理机）的资源，在物理机上是可以看到容器所运行的程序的，每个容器都有自己的IP地址。</span></span><br><span class="line">docker inspect --format=<span class="string">&#x27;&#123;&#123;.Name&#125;&#125; - &#123;&#123;range .NetworkSettings.Networks&#125;&#125; &#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27;</span> $(docker ps -aq) | grep <span class="string">&quot;容器名或者ID&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># curl - I 加网址，可以看到 http 响应数据</span></span><br><span class="line"></span><br><span class="line">netstat -lntup  <span class="comment"># 查看给 docker 的端口映射</span></span><br><span class="line"></span><br><span class="line">docker run -d -p 80:80 nginx  <span class="comment"># -p 80:80 端口映射，表示宿主机的80端口映射到了nginx容器的80端口。</span></span><br></pre></td></tr></table></figure>

<h4 id="docker-run-参数。"><a href="#docker-run-参数。" class="headerlink" title="docker run 参数。"></a>docker run 参数。</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-d 						<span class="comment"># 放后台运行</span></span><br><span class="line">-p		端口映射    	  <span class="comment"># -p 宿主机端口:容器端口</span></span><br><span class="line">--name  指定容器的名字		<span class="comment"># docker run -it --name alfie 镜像ID或者名称</span></span><br><span class="line">--<span class="built_in">link</span>	关联另一个容器		<span class="comment"># </span></span><br><span class="line">-e MYSQL_ROOT_PASSWORD	  <span class="comment"># 设置容器的一些属性</span></span><br><span class="line">-it 					<span class="comment"># 是给运行起来的这个容器分配一个终端，就可以进入到容器内部操作了。</span></span><br></pre></td></tr></table></figure>

<h3 id="制作-docker-镜像并上传"><a href="#制作-docker-镜像并上传" class="headerlink" title="制作 docker 镜像并上传"></a>制作 docker 镜像并上传</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">docker pull debian:latest</span><br><span class="line">docker run -it --name alfie_nginx -p 90:80 debian:latest</span><br><span class="line"><span class="comment"># 进入容器</span></span><br><span class="line">docker <span class="built_in">exec</span> -it alfie_debian /bin/bash</span><br><span class="line"><span class="comment"># 安装 nginx</span></span><br><span class="line">apt update 		        <span class="comment"># 更新 apt 缓存</span></span><br><span class="line">apt install nginx -y    <span class="comment"># 安装 nginx</span></span><br><span class="line">nginx -v 				<span class="comment"># 查看 nginx 版本，</span></span><br><span class="line"><span class="comment"># ip addr </span></span><br><span class="line"><span class="comment"># apt install procps	# 安装 ps 指令</span></span><br><span class="line"><span class="comment"># ps -ef</span></span><br><span class="line">nginx					<span class="comment"># 启动 nginx，systemctl 是没有的，没有安装这个指令</span></span><br><span class="line"><span class="built_in">exit</span>					<span class="comment"># 退出容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打包之前最好先停止容器</span></span><br><span class="line">docker stop alfie_debian</span><br><span class="line">docker commit alfie_nginx syralfie/debian_nginx:v1	<span class="comment"># 根据名字或ID都可以提交，后面加个镜像名称和版本，syralfie是docker仓库用户名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传到官方仓库</span></span><br><span class="line">docker login			<span class="comment"># 登录官方仓库</span></span><br><span class="line"><span class="comment"># docker tag debian_nginx:v2 syralfie/debian_nginx:v2  #这是名字，如果名称不冲突就不用改名字</span></span><br><span class="line">docker push syralfie_debian_nginx:v2  	<span class="comment"># 直接 pash 即可</span></span><br></pre></td></tr></table></figure>

<h3 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h3><p>docker-compose 是批量管理 docker 容器的工具</p>
<p>比如启动 wordpress项目，需要启动两个容器才行，有时候需要同时启动多个容器来完成你想要做的事情，但是到底启动多少个容器呢？比如 wordpress，我们记不住，换一台电脑，如果不看笔记，很难想起来。但是有了docker-compose就可以解决这个问题。</p>
<p><strong>CentOS 7 安装docker-compose，</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release.noarch -y</span><br><span class="line">yum install docker-compose -y</span><br></pre></td></tr></table></figure>

<p><strong>kali 安装docker-compose</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install docker-compose -y</span><br></pre></td></tr></table></figure>

<p>查看版本</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -v</span><br></pre></td></tr></table></figure>

<p>注意：使用<code>systemctl restart docker</code> 重启 docker 服务会自动关闭所有的容器。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动容器时，如果加上了 --restart=always,那么重启服务之后，这个容器会自动启动。</span></span><br><span class="line">docker run -it -d --restart=always nginx:1.16		<span class="comment"># 实现了开机自启动的效果</span></span><br></pre></td></tr></table></figure>

<p>配置文件 docker-compose.yml，有了这个配置文件，就可以通过 docker-compose 来控制多个容器了</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为了避免端口冲突，可以先关闭所有docker 容器</span></span><br><span class="line">docker stop $(docker ps -aq) </span><br><span class="line"><span class="comment"># 先创建一个 wordpress 文件夹，然后进入里面创建一个docker-compose.yml 名字的文件</span></span><br><span class="line"><span class="built_in">mkdir</span> wordpress</span><br><span class="line"><span class="built_in">cd</span> wordpress/</span><br><span class="line"><span class="built_in">touch</span> docker-compose.yml</span><br><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure>

<p>将如下内容拷贝到文件中，保存并退出，</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">   wp_mysql:                   <span class="comment"># 服务1：mysql</span></span><br><span class="line">     image: mysql:lts    <span class="comment"># 使用镜像 mysql：latest版本</span></span><br><span class="line">     restart: always     <span class="comment"># 容器服务宕机后总是重启</span></span><br><span class="line">     volumes:</span><br><span class="line">       - /root/docker/wordpress/mysql:/var/lib/mysql   <span class="comment"># 数据持久化</span></span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;3306&quot;</span></span><br><span class="line">     networks:</span><br><span class="line">       - mywordpress     <span class="comment">#网络名称为mywordpress</span></span><br><span class="line">     environment:        <span class="comment"># 环境配置</span></span><br><span class="line">       MYSQL_ROOT_PASSWORD: xxxxxxxx <span class="comment">#数据库root用户密码</span></span><br><span class="line">       MYSQL_DATABASE: wordpress <span class="comment">#wordpress数据库名称</span></span><br><span class="line"> </span><br><span class="line">   wordpress:          <span class="comment"># 服务2：wordpress</span></span><br><span class="line">     depends_on:       <span class="comment"># wordpress服务启动时依赖mysql服务，所以会自动先启动mysql服务</span></span><br><span class="line">       - wp_mysql</span><br><span class="line">     image: wordpress:latest    <span class="comment"># 使用镜像 wordpress：latest最新版</span></span><br><span class="line">     restart: always</span><br><span class="line">     volumes:</span><br><span class="line">       - /root/docker/wordpress/html:/var/www/html   <span class="comment"># 数据持久化</span></span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;xxxx:80&quot;</span>          <span class="comment">#端口映射xxxx:80</span></span><br><span class="line">     networks:</span><br><span class="line">       - mywordpress</span><br><span class="line">     environment:        <span class="comment"># 环境</span></span><br><span class="line">       WORDPRESS_DB_HOST: wp_mysql:3306     <span class="comment"># wordpress连接db的3306端口</span></span><br><span class="line">       WORDPRESS_DB_USER: root    <span class="comment"># 数据库用户为root</span></span><br><span class="line">       WORDPRESS_DB_PASSWORD: xxxxxxxx   <span class="comment"># 数据库root密码</span></span><br><span class="line">       WORDPRESS_DB_NAME: wordpress    <span class="comment">#数据库名字是wordpress</span></span><br><span class="line">networks:</span><br><span class="line">  mywordpress: <span class="comment">#创建网路mywordpress</span></span><br></pre></td></tr></table></figure>

<p>常用 docker-compose 命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建并启动</span></span><br><span class="line">docker-compose up -d    <span class="comment"># 启动之后，就可以通过浏览器访问了</span></span><br><span class="line"><span class="comment"># 停止并删除</span></span><br><span class="line">docker-compose down</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">docker-compose restart </span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">docker-compose stop</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">docker-compose start</span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">   wp_mysql:                  </span><br><span class="line">     image: mysql:lts    </span><br><span class="line">     restart: always    </span><br><span class="line">     volumes:</span><br><span class="line">       - /root/docker/wordpress/mysql:/var/lib/mysql   </span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;3306&quot;</span></span><br><span class="line">     networks:</span><br><span class="line">       - mywordpress     </span><br><span class="line">     environment:       </span><br><span class="line">       MYSQL_ROOT_PASSWORD: abc@qq.com </span><br><span class="line">       MYSQL_DATABASE: wordpress </span><br><span class="line"> </span><br><span class="line">   wordpress:          </span><br><span class="line">     depends_on:       </span><br><span class="line">       - wp_mysql</span><br><span class="line">     image: wordpress:latest    </span><br><span class="line">     restart: always</span><br><span class="line">     volumes:</span><br><span class="line">       - /root/docker/wordpress/html:/var/www/html   </span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;80:80&quot;</span>          </span><br><span class="line">     networks:</span><br><span class="line">       - mywordpress</span><br><span class="line">     environment:        </span><br><span class="line">       WORDPRESS_DB_HOST: wp_mysql:3306     </span><br><span class="line">       WORDPRESS_DB_USER: root    </span><br><span class="line">       WORDPRESS_DB_PASSWORD: abc@qq.com   </span><br><span class="line">       WORDPRESS_DB_NAME: wordpress    </span><br><span class="line">networks:</span><br><span class="line">  mywordpress: </span><br></pre></td></tr></table></figure>
















  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">最近的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/2014/09/19/网络安全/docker/002_CentOS7安装docker/" title="CentOS7 安装 docker">CentOS7 安装 docker</a></h2>
                <p class="excerpt">
                
                使用yum 安装 docker
1yum install docker -y

启动 docker
1systemctl start docker

设置开机自启
1systemctl enable docker

体验 docker 版 nginx 最新版
1docker run -d -p 80
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2014-09-19T08:15:55.000Z" class="post-list__meta--date date">2014-09-19</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/docker/" rel="tag">docker</a>
</span><a class="btn-border-small" href="/2014/09/19/网络安全/docker/002_CentOS7安装docker/">继续阅读</a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">更早的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/2014/09/19/网络安全/网络/Linux_修改静态IP/" title="Linux 修改静态IP">Linux 修改静态IP</a></h2>
                <p class="excerpt">
                
                修改网卡
1234567[root@localhost ~]# cd /etc/sysconfig/network-scripts/     # 网卡位置[root@localhost network-scripts]# lsifcfg-ens33  ifdown-ib    ifdown-ppp 
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2014-09-19T08:15:55.000Z" class="post-list__meta--date date">2014-09-19</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/Linux/" rel="tag">Linux</a>
</span><a class="btn-border-small" href="/2014/09/19/网络安全/网络/Linux_修改静态IP/">继续阅读</a></div>
                       
            </div>
        
     
   
   
  
</section>

  

<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'lroyle'; 
      
  var disqus_identifier = '/2014/09/19/网络安全/docker/001_Kali安装dokcer/';
  var disqus_title = 'Kali 安装 docker';
  var disqus_url = 'http://liurong.love/2014/09/19/网络安全/docker/001_Kali安装dokcer/';
  

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          //dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          dsq.src = 'https://a.disquscdn.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2025 lroyle - 本站点采用 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
       
    </span>
    <span class="footer__copyright">
             - 基于 <a href="http://hexo.io">Hexo</a> 搭建，使用 <a href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a href="https://liurong.love ">@LIURONG</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>
       
    
    
</footer>


        </div>
    </div>

     
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-78918255-1', 'auto');
	ga('send', 'pageview');
</script>

    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?691552d8a51493e93d82164e4a98f26d";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
