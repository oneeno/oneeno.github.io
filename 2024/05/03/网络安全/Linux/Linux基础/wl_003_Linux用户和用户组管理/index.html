<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>用户和用户组管理 | LIURONG</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="做时间的朋友！">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="用户和用户组管理 | LIURONG">
    <meta name="twitter:description" content="做时间的朋友！">

    <meta property="og:type" content="article">
    <meta property="og:title" content="用户和用户组管理 | LIURONG">
    <meta property="og:description" content="做时间的朋友！">

    
    <meta name="author" content="lroyle">
    
    
<link rel="stylesheet" href="/css/vno.css">

    
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">


    
    <link rel="icon" href="/images/avatar-small.png">
    

    <meta name="generator" content="hexo"/>
    
    <link rel="alternate" type="application/rss+xml" title="LIURONG" href="/atom.xml">
    

    <link rel="canonical" href="http://liurong.love/2024/05/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/Linux/Linux%E5%9F%BA%E7%A1%80/wl_003_Linux%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/"/>

                 
</head>

<body class="home-template no-js">
    
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>

    
<script src="/js/main.js"></script>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-cover.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 LIURONG 的主页"><img src="/images/avatar.jpg" width="80" alt="LIURONG logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for LIURONG">LIURONG</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">面向大海 | 重新启航</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">做时间的朋友！</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">文字阁</a></li>
            
              <li class="navigation__item"><a href="/favourite">黄金屋</a></li>
            
              <li class="navigation__item"><a href="/favourite/time.html">时光机</a></li>
            
              <li class="navigation__item"><a href="/favourite/image.html">幻想间</a></li>
            
              <li class="navigation__item"><a href="/about">关于我</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  
  <li class="navigation__item">
    <a href="https://weibo.com/lroyle" title="我的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li> 


  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/oneeno" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  

  <li class="navigation__item">
    <a href="/atom.xml" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-purple"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2024-05-03T14:39:45.000Z" class="post-list__meta--date date">2024-05-03</time> &#8226; <span class="post-meta__tags tags">于 
  <a class="-none-link" href="/tags/Linux/" rel="tag">Linux</a>
 </span>
      <span class="page-pv">
       阅读 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">用户和用户组管理</h1>
  </header>

  <section class="post">
    <h2 id="1，用户管理"><a href="#1，用户管理" class="headerlink" title="1，用户管理"></a>1，用户管理</h2><p><strong>创建用户</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd</span><br><span class="line"><span class="comment"># 创建一个用户</span></span><br><span class="line">useradd test1</span><br></pre></td></tr></table></figure>

<p><strong>设置密码</strong></p>
<p>远程 SSH 连接是需要密码的，所以想让某个用户登录系统，必须设置密码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br><span class="line">passwd test1</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/Linux/Linux%E5%9F%BA%E7%A1%80/wl_003_Linux%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/image-20240505225955990.png" alt="image-20240505225955990"></p>
<p><strong>普通用户自己修改密码</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd  	<span class="comment"># 给当前登录用户修改密码，root用户修改密码不需要输入旧密码，普通用户需要输入旧密码</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/Linux/Linux%E5%9F%BA%E7%A1%80/wl_003_Linux%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/image-20240505230409994.png" alt="image-20240505230409994"></p>
<p>一般Linux的密码是有复杂度要求的，比如下面这种密码就可以通过，大小写组合、数字、特殊字符组合起来超过8位。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">123@qq.com</span><br><span class="line">123qweASD</span><br></pre></td></tr></table></figure>

<p><strong>免交互修改密码</strong></p>
<p>这样不需要输入再次密码，echo是打印的意思，有结果输出给passwd命令来修改test1用户的密码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 123456|passwd --stdin test1</span><br><span class="line"><span class="comment"># 上面这种方式适合同时修改多个Linux服务器系统的密码。且只能在root用户上使用</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/03/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/Linux/Linux%E5%9F%BA%E7%A1%80/wl_003_Linux%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/image-20240505230851611.png" alt="image-20240505230851611"></p>
<h4 id="检查用户是否存在"><a href="#检查用户是否存在" class="headerlink" title="检查用户是否存在"></a>检查用户是否存在</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span></span><br><span class="line"><span class="comment"># 用户存在，系统的返回结果</span></span><br><span class="line"><span class="built_in">id</span> test1</span><br><span class="line">uid=1000(test1) gid=1000(test1) 组=1000(test1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户不存在，系统的返回结果</span></span><br><span class="line"><span class="built_in">id</span> test0</span><br><span class="line"><span class="built_in">id</span>: test0: no such user</span><br></pre></td></tr></table></figure>

<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">userdel</span><br><span class="line"><span class="comment"># 被删除的用户还在登录状态，是不能删除的</span></span><br><span class="line">userdel test0</span><br><span class="line">userdel: user test0 is currently used by process 1459</span><br><span class="line"><span class="comment"># 被删除的用户退出登录之后，可以正常删除</span></span><br><span class="line">userdel test0</span><br></pre></td></tr></table></figure>

<p>Linux删除用户之后，&#x2F;home&#x2F;目录下对应的用户文件夹还在，如果还想重新加回这个用户，那么会提示家目录存在，不会从样板目录（skel）中复制任何文件了，通过 <code>ls -a /ect/skel</code>，可以查看skel目录下的内容了。</p>
<p>还提示邮箱文件已经存在。<code>ls /var/spool/mail</code> 下面</p>
<p>注意：删除之后的用户，再次创建出来，密码是需要重新设置的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usrdel	-r	test1		# 删除用户，并删除用户相关的目录。</span><br></pre></td></tr></table></figure>

<h4 id="修改用户信息，修改属性"><a href="#修改用户信息，修改属性" class="headerlink" title="修改用户信息，修改属性"></a>修改用户信息，修改属性</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">usermod		<span class="comment"># modify 它有很多选项（参数），-L 是锁定用户，通过命令 -h（或者 --help，一个-后面一般跟一个字母即可，两个-后面一般跟完整单词），可以查看命令的各种选项的意思，比如：usermod -h</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 锁定用户（和windows的禁用用户一个意思）</span></span><br><span class="line">usermod 	-L	test1		<span class="comment"># 被锁定的用户，下次登录不上系统了</span></span><br><span class="line">usermod		-U	test1		<span class="comment"># 解锁用户</span></span><br><span class="line">lchage		-l	test1		<span class="comment"># 查看用户详细信息</span></span><br><span class="line">帐号没被锁。</span><br><span class="line">至少:	0</span><br><span class="line">至多:	99999</span><br><span class="line">警告:	7</span><br><span class="line">不活跃：	从不</span><br><span class="line">最后一次改变：	2024年04月25日</span><br><span class="line">密码过期：	从不</span><br><span class="line">密码不活跃：	从不</span><br><span class="line">帐号过期：	从不</span><br></pre></td></tr></table></figure>

<h4 id="禁止用户登录"><a href="#禁止用户登录" class="headerlink" title="禁止用户登录"></a>禁止用户登录</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">usrmod	-s	/sbin/nologin test2</span><br><span class="line">grep -w &#x27;test2&#x27; /etc/passwd</span><br><span class="line">test2:x:1001:1001::/home/test2:/sbin/nologin</span><br></pre></td></tr></table></figure>

<h4 id="查看用户详细信息"><a href="#查看用户详细信息" class="headerlink" title="查看用户详细信息"></a>查看用户详细信息</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">lchage</span><br><span class="line">lchage	-l	test2</span><br><span class="line">帐号没被锁。</span><br><span class="line">至少:	0</span><br><span class="line">至多:	99999</span><br><span class="line">警告:	7</span><br><span class="line">不活跃：	从不</span><br><span class="line">最后一次改变：	2024年04月25日</span><br><span class="line">密码过期：	从不</span><br><span class="line">密码不活跃：	从不</span><br><span class="line">帐号过期：	从不</span><br></pre></td></tr></table></figure>

<p>所有用户的信息都存储在 &#x2F;etc&#x2F;passwd文件中，每创建一个用户该文件应付多一行记录</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"><span class="comment"># 下面的用户都是系统自带用户，不用管它</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin</span><br><span class="line">abrt:x:173:173::/etc/abrt:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">chrony:x:998:996::/var/lib/chrony:/sbin/nologin</span><br><span class="line">test2:x:1001:1001::/home/test2:/sbin/nologin</span><br><span class="line">wulaoban:x:1003:1004::/home/wulaoban:/bin/bash</span><br><span class="line">lisi:x:1004:1005::/home/lisi:/bin/bash</span><br><span class="line">zl:x:1005:1006::/home/zl:/bin/bash</span><br><span class="line"><span class="comment"># 下面这个是我们自己创建的用户</span></span><br><span class="line">test3:x:1006:1000::/home/test3:/bin/bash</span><br><span class="line">nginx:x:997:995:Nginx web server:/var/lib/nginx:/sbin/nologin</span><br></pre></td></tr></table></figure>

<h4 id="passwd-文件解释"><a href="#passwd-文件解释" class="headerlink" title="passwd 文件解释"></a>passwd 文件解释</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">test2:x:1001:1001::/home/test2:/sbin/nologin</span><br><span class="line">test2:x:1001:1001::/home/test2:/sbin/nologin</span><br><span class="line">第一列：用户名</span><br><span class="line">第二列：x</span><br><span class="line">第三列：uid		<span class="comment"># root 用户的 uid 是0，我们自己创建的用户uid是1000及之后的数值</span></span><br><span class="line">第四列：gid</span><br><span class="line">第五列：注释，一般为空</span><br><span class="line">第七列：使用 shell 的名称，默认使用/bin/bash</span><br></pre></td></tr></table></figure>

<p>所有用户的密码都存储在 &#x2F;etc&#x2F;shadow中，设置了密码的长度比较长，密码是两层加密的，基本无法破解，但是如果黑客权限比较高，它可以用知道密码的shadow文件来替换这个文件，或者修改这个文件下某个用户的密码，只有root用户才有权限修改这个文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span>	/etc/shadow</span><br><span class="line">root:$6<span class="variable">$VvU</span>.foUZJZpSuXJz<span class="variable">$TTEnqmrYFqM2Cc1epDyZzmjzo35DwLvaRQeTU4WAx2Y9izqNZdryOE8Ie4WwesYk4ms1UqHCA0HLmWiG5TbN5</span>.::0:99999:7:::</span><br><span class="line">bin:*:18353:0:99999:7:::</span><br><span class="line">daemon:*:18353:0:99999:7:::</span><br><span class="line">adm:*:18353:0:99999:7:::</span><br><span class="line">lp:*:18353:0:99999:7:::</span><br><span class="line"><span class="built_in">sync</span>:*:18353:0:99999:7:::</span><br><span class="line">shutdown:*:18353:0:99999:7:::</span><br><span class="line">halt:*:18353:0:99999:7:::</span><br><span class="line">mail:*:18353:0:99999:7:::</span><br><span class="line">operator:*:18353:0:99999:7:::</span><br><span class="line">games:*:18353:0:99999:7:::</span><br><span class="line">ftp:*:18353:0:99999:7:::</span><br><span class="line">nobody:*:18353:0:99999:7:::</span><br><span class="line">systemd-network:!!:19833::::::</span><br><span class="line">dbus:!!:19833::::::</span><br><span class="line">polkitd:!!:19833::::::</span><br><span class="line">tss:!!:19833::::::</span><br><span class="line">abrt:!!:19833::::::</span><br><span class="line">sshd:!!:19833::::::</span><br><span class="line">postfix:!!:19833::::::</span><br><span class="line">chrony:!!:19833::::::</span><br><span class="line">test2:$6$vzIvHaXz<span class="variable">$nErkO</span>.TL.FyOYTuY4vdj0mpbYPSK66D/HLWTdLJ5S.1O/2Ir/xVrzdSGb4l1lnkl.J/j5mYSRzxZ74MfjgREV0:19838:0:99999:7:::</span><br><span class="line">wulaoban:$6<span class="variable">$yM</span>/9LHVv<span class="variable">$9J</span>/lDXxJ9mi1azu0ULkUw6Fj22p9PpKOB3BIridBPVlvsa/zEmrITiZW9QuZYQfH1FVWTF7kExnl7TrHV4CTM0:19838:0:99999:7:::</span><br><span class="line">lisi:$6$4r10HT2K<span class="variable">$GXO36IzxoBIZ</span>/pMRzsTJWixzNF/XibfWtnwuyhpuI5gQE2KmiP0vDCpN/QQ.egJvWuMHBrPlzq04xWi3yNLK81:19838:0:99999:7:::</span><br><span class="line">zl:$6$f4yPOp0s<span class="variable">$DLLro8RUs3Oqk2h6gU7PKU9XUeeunuUDFRaWSVR1eyVpVwvLuG7sbMG7HffNAE</span>.TIFba3o/kmOhDsqNTVT1CN.:19838:0:99999:7:::</span><br><span class="line">test3:!!:19838:0:99999:7:::</span><br><span class="line">nginx:!!:19841::::::</span><br></pre></td></tr></table></figure>

<p>登录主机的两种方式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">本地登录：直接在主机上输入用户名和密码登录</span><br><span class="line">远程登录：ssh远程登录</span><br></pre></td></tr></table></figure>

<p>Window默认只能同时一个用户登录，登录另外一个用户，前一个用户就会自动下线。</p>
<p>Linux支持多用户在多个地方同时登录一个系统，每个用户都有一个终端来控制操作系统，</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前登录了几个用户，或者打开了几个终端</span></span><br><span class="line">w</span><br><span class="line">结果：下面表示2个终端登录了</span><br><span class="line"> 23:40:47 up 44 min,  2 <span class="built_in">users</span>,  load average: 0.00, 0.01, 0.02</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     tty1                      22:57   43:51   0.00s  0.00s -bash</span><br><span class="line">root     pts/0    10.0.0.1         22:57    7.00s  0.02s  0.00s w</span><br><span class="line"><span class="comment"># tty1 表示本地登录的，pts/0 表示远程登录的</span></span><br></pre></td></tr></table></figure>

<h2 id="2，用户组管理"><a href="#2，用户组管理" class="headerlink" title="2，用户组管理"></a>2，用户组管理</h2><h3 id="新建组和查看组"><a href="#新建组和查看组" class="headerlink" title="新建组和查看组"></a>新建组和查看组</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">groupadd  组名</span><br><span class="line">groupadd	<span class="built_in">test</span></span><br><span class="line"><span class="built_in">cat</span> /etc/group			<span class="comment"># 查看有哪些组</span></span><br></pre></td></tr></table></figure>

<h3 id="指定组来创建用户。"><a href="#指定组来创建用户。" class="headerlink" title="指定组来创建用户。"></a>指定组来创建用户。</h3><p>如果没有指定组，那么创建用户的时候，Linux会自动创建一个与用户名同名的组</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -g 是指定主组</span></span><br><span class="line">[root@10 ~]<span class="comment"># useradd -g test1 test3</span></span><br><span class="line">[root@10 ~]<span class="comment"># id test3</span></span><br><span class="line">uid=1007(test3) gid=1007(test1) 组=1007(test1)</span><br><span class="line">gid 表示用户的属组的主组</span><br><span class="line">组=表示用户的属组，用户可以属于多个组，一个主组，多个其它组</span><br></pre></td></tr></table></figure>

<h3 id="删除组"><a href="#删除组" class="headerlink" title="删除组"></a>删除组</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupdel	组名</span><br><span class="line">[root@10 ~]<span class="comment"># groupdel test		# 如果组内有用户，会报错，需要先删除主组属于这个组的所有用户（userdel -r 用户名），或者将用户移到其它的组之后再删除组。</span></span><br></pre></td></tr></table></figure>

<h3 id="修改组"><a href="#修改组" class="headerlink" title="修改组"></a>修改组</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod	-n	<span class="built_in">test</span>	abc		<span class="comment"># 将 abc 组名修改为 test</span></span><br></pre></td></tr></table></figure>

<h3 id="修改用户所属的主组"><a href="#修改用户所属的主组" class="headerlink" title="修改用户所属的主组"></a>修改用户所属的主组</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">usrmod -g 组名</span><br><span class="line">[root@10 ~]<span class="comment"># usermod -g test abc		# 将 abc 用户的主组改成 test</span></span><br><span class="line">[root@10 ~]<span class="comment"># id abc</span></span><br><span class="line">uid=1008(abc) gid=1009(<span class="built_in">test</span>) 组=1009(<span class="built_in">test</span>)</span><br><span class="line"><span class="comment"># 然后就可以删除 abc 组了</span></span><br><span class="line">[root@10 ~]<span class="comment"># groupdel abc				# 删除 abc 组</span></span><br></pre></td></tr></table></figure>

<h3 id="将用户添加到多个其它组中"><a href="#将用户添加到多个其它组中" class="headerlink" title="将用户添加到多个其它组中"></a>将用户添加到多个其它组中</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">usermod -G</span><br><span class="line">[root@10 ~]<span class="comment"># usermod -G test test1		# 将 test1 用户也添加到 test 组</span></span><br><span class="line">[root@10 ~]<span class="comment"># id test1</span></span><br><span class="line">uid=1006(test1) gid=1007(test1) 组=1007(test1),1009(<span class="built_in">test</span>)</span><br></pre></td></tr></table></figure>


  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">最近的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/2024/05/03/网络安全/Linux/Linux基础/wl_002_Linux基础操作/" title="Linux 基础操作">Linux 基础操作</a></h2>
                <p class="excerpt">
                
                登录系统先输入用户名：root，再输入密码：123456，输入密码时，是不显示密码的。
下面是输错密码的结果

下面是输入正确密码的结果

输入 logout 指令，按回车，可以退出登录

退出后，回到登录界面

使用远程连接工具连接控制系统使用系统自带的ssh工具，可以连接这个 CentOS系统，
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2024-05-03T14:39:45.000Z" class="post-list__meta--date date">2024-05-03</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/Linux/" rel="tag">Linux</a>
</span><a class="btn-border-small" href="/2024/05/03/网络安全/Linux/Linux基础/wl_002_Linux基础操作/">继续阅读</a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">更早的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/2024/05/02/网络安全/Linux/Linux基础/wl_001_安装Centos/" title="安装Linux">安装Linux</a></h2>
                <p class="excerpt">
                
                1, 选择第一个
2， 选择语言
3， 安装盘符设置
4， 选择我要配置分区

选择标准分区

分区设置

然后点完成

点接受更改

3 关掉keydump 功能
把禁用keydump 前面的勾去掉

开启连网功能
打开以太网的按钮

5 安装常用软件
勾选常用的3个，如下图

点开始安装

创建
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2024-05-02T14:39:45.000Z" class="post-list__meta--date date">2024-05-02</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/Linux/" rel="tag">Linux</a>
</span><a class="btn-border-small" href="/2024/05/02/网络安全/Linux/Linux基础/wl_001_安装Centos/">继续阅读</a></div>
                       
            </div>
        
     
   
   
  
</section>

  

<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'lroyle'; 
      
  var disqus_identifier = '/2024/05/03/网络安全/Linux/Linux基础/wl_003_Linux用户和用户组管理/';
  var disqus_title = '用户和用户组管理';
  var disqus_url = 'http://liurong.love/2024/05/03/网络安全/Linux/Linux基础/wl_003_Linux用户和用户组管理/';
  

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          //dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          dsq.src = 'https://a.disquscdn.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2025 lroyle - 本站点采用 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
       
    </span>
    <span class="footer__copyright">
             - 基于 <a href="http://hexo.io">Hexo</a> 搭建，使用 <a href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a href="https://liurong.love ">@LIURONG</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>
       
    
    
</footer>


        </div>
    </div>

     
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-78918255-1', 'auto');
	ga('send', 'pageview');
</script>

    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?691552d8a51493e93d82164e4a98f26d";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
